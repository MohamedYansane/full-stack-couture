<app-header></app-header>
<div class="main-container">
    <app-navbar></app-navbar>
    <div class="main-content">
        <div
            class=" table-client bg-white flex flex-col gap-y-4 bg-transparent p-3 "
            *ngIf="isModerator"
        >
            <div class="title flex items-center justify-between">
                <h2 class="header-title ">Clients</h2>
                <div class="flex-1 flex items-center justify-end w-full gap-x-3">
                    <input
                        type="text"
                        name
                        id
                        (keyup)="applyFilter($event)"
                        placeholder="Rechercher...."
                        #input
                        class="field-input w-[38%]"
                    >
                    <button
                        (click)="openDialogForm()"
                        class=" text-white px-7 py-2 rounded-md w-[12%]"
                    >
                        <fa-icon [icon]="faPlusCircle"></fa-icon>
                        Add
                    </button>
                </div>

            </div>

            <div class="table-container rounded-md shadow-[rgba(13,_38,_76,_0.19)_0px_9px_20px]">
                <table
                    mat-table
                    [dataSource]="dataSource"
                    matSort
                >

                    <!-- ID Column -->
                    <ng-container matColumnDef="id">
                        <th
                            mat-header-cell
                            *matHeaderCellDef
                            mat-sort-header
                        >
                            ID
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let user"
                        >
                            {{user.id}}
                        </td>
                    </ng-container>

                    <!-- Progress Column -->
                    <ng-container matColumnDef="nom">
                        <th
                            mat-header-cell
                            *matHeaderCellDef
                            mat-sort-header
                        >
                            Nom
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let user"
                        >
                            {{user.nom}}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="prenom">
                        <th
                            mat-header-cell
                            *matHeaderCellDef
                            mat-sort-header
                        >
                            Prenom
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let user"
                        >
                            {{user.prenom}}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="phone">
                        <th
                            mat-header-cell
                            *matHeaderCellDef
                            mat-sort-header
                        >
                            Phone
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let user"
                        >
                            {{user.phone}}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="adresse">
                        <th
                            mat-header-cell
                            *matHeaderCellDef
                            mat-sort-header
                        >
                            Adresse
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let user"
                        >
                            {{user.adresse}}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="email">
                        <th
                            mat-header-cell
                            *matHeaderCellDef
                            mat-sort-header
                        >
                            Email
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let user"
                        >
                            {{user.email}}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="cni">
                        <th
                            mat-header-cell
                            *matHeaderCellDef
                            mat-sort-header
                        >
                            CNI
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let user"
                        >
                            {{user.cni}}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="sexe">
                        <th
                            mat-header-cell
                            *matHeaderCellDef
                            mat-sort-header
                        >
                            Sexe
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let user"
                        >
                            {{user.sexe}}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="status">
                        <th
                            mat-header-cell
                            *matHeaderCellDef
                            mat-sort-header
                        >
                            Status
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let user"
                            [ngClass]="user.status"
                        >
                            {{user.status}}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="action">
                        <th
                            mat-header-cell
                            *matHeaderCellDef
                            mat-sort-header
                        >
                            Action
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let user"
                        >
                            <span class="flex gap-x-2 items-center">
                                <fa-icon
                                    class="cursor-pointer text-yellow-400"
                                    [icon]="faEdit"
                                    (click)="openEditForm(user,true)"
                                ></fa-icon>
                                <fa-icon
                                    class="cursor-pointer text-red-600"
                                    [icon]="faTrash"
                                    (click)="deleteUser(user.id)"
                                ></fa-icon>
                                <fa-icon
                                    class="cursor-pointer text-primary-blue"
                                    [icon]="faEye"
                                    (click)="openEditForm(user,false)"
                                ></fa-icon>
                            </span>
                        </td>
                    </ng-container>

                    <tbody>
                        <tr
                            mat-header-row
                            *matHeaderRowDef="displayedColumns"
                        ></tr>
                        <tr
                            mat-row
                            *matRowDef="let user; columns: displayedColumns;"
                        ></tr>

                        <!-- user shown when there is no matching data. -->
                        <tr *matNoDatauser>
                            <td
                                class="mat-cell"
                                colspan="4"
                            >
                                Aucune correspondance "{{input.value}}"
                            </td>
                        </tr>
                    </tbody>
                </table>

                <mat-paginator
                    [pageSizeOptions]="[5, 10, 25, 100]"
                    aria-label="Select page of clients"
                ></mat-paginator>

            </div>
        </div>
    </div>
</div>
